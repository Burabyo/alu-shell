#!/usr/bin/env bash
# Check if the log file is provided as an argument
if [ $# -eq 0 ]; then
    echo "Usage: $0 <apache_log_file>"
    exit 1
fi

# Use awk to extract IP and HTTP status code, count occurrences, sort, and format output
awk '{print $1 " " $9}' "$1" | \
    awk '{ count[$0]++ }
    END {
        for (line in count)
            print count[line] " " line
    }' | \
    sort -rn
